@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: #ffffff;
  --foreground: #171717;
  --primary-green: #10b981;
  --primary-green-dark: #059669;
  --primary-green-light: #6ee7b7;
  --secondary-green: #d1fae5;
}

/* UNIFIED FONT SYSTEM - POPPINS + CAIRO */
.font-poppins {
  font-family: var(--font-poppins), -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, "Helvetica Neue", Arial, sans-serif;
}

.font-cairo {
  font-family: var(--font-cairo), "Times New Roman", Georgia, serif;
}

/* DEFAULT FONT FOR ALL ELEMENTS - POPPINS (fallback only) */
body, html {
  font-family: var(--font-poppins), -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, "Helvetica Neue", Arial, sans-serif;
}

/* FORCE FONT CLASSES - IMMEDIATE APPLICATION */
.font-poppins {
  font-family: var(--font-poppins), -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, "Helvetica Neue", Arial, sans-serif !important;
}

.font-cairo {
  font-family: var(--font-cairo), "Times New Roman", Georgia, serif !important;
}

/* ARABIC TEXT USES CAIRO - HIGHEST PRIORITY */
[lang="ar"], .arabic-text {
  font-family: var(--font-cairo), "Times New Roman", Georgia, serif !important;
}

/* FORCE CAIRO FOR ARABIC LANGUAGE */
body.font-cairo {
  font-family: var(--font-cairo), "Times New Roman", Georgia, serif !important;
}

/* FORCE POPPINS FOR NON-ARABIC LANGUAGES */
body.font-poppins {
  font-family: var(--font-poppins), -apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, "Helvetica Neue", Arial, sans-serif !important;
}

/* UNIFIED TYPOGRAPHY SCALE */
.text-xs { font-size: 0.75rem; line-height: 1rem; }
.text-sm { font-size: 0.875rem; line-height: 1.25rem; }
.text-base { font-size: 1rem; line-height: 1.5rem; }
.text-lg { font-size: 1.125rem; line-height: 1.75rem; }
.text-xl { font-size: 1.25rem; line-height: 1.75rem; }
.text-2xl { font-size: 1.5rem; line-height: 2rem; }
.text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
.text-4xl { font-size: 2.25rem; line-height: 2.5rem; }
.text-5xl { font-size: 3rem; line-height: 1.6; }
.text-6xl { font-size: 3.75rem; line-height: 1.6; }
.text-7xl { font-size: 4.5rem; line-height: 1.6; }

body {
  background: var(--background);
  color: var(--foreground);
}

/* Enhanced RTL Support with automatic direction detection */
[dir="rtl"] {
  direction: rtl;
}

[dir="ltr"] {
  direction: ltr;
}

/* Ensure direction changes are applied immediately */
html[dir="rtl"] {
  direction: rtl;
}

html[dir="ltr"] {
  direction: ltr;
}

/* Body direction classes for JavaScript updates */
body.rtl {
  direction: rtl !important;
}

body.ltr {
  direction: ltr !important;
}

/* RTL-specific utilities */
@layer utilities {
  /* Direction-aware margin and padding */
  .ms-4 {
    margin-inline-start: 1rem;
  }

  .me-4 {
    margin-inline-end: 1rem;
  }

  .ps-4 {
    padding-inline-start: 1rem;
  }

  .pe-4 {
    padding-inline-end: 1rem;
  }

  /* Direction-aware flex */
  .flex-start {
    justify-content: flex-start;
  }

  .flex-end {
    justify-content: flex-end;
  }

  /* RTL-aware text alignment */
  .text-start {
    text-align: start;
  }

  .text-end {
    text-align: end;
  }

  /* Direction-aware borders */
  .border-s {
    border-inline-start-width: 1px;
  }

  .border-e {
    border-inline-end-width: 1px;
  }

  /* UNIFIED TYPOGRAPHY CLASSES - POPPINS + CAIRO */
  .font-unified {
    font-family: var(--font-poppins), -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  }
  
  .font-arabic {
    font-family: var(--font-cairo), "Times New Roman", Georgia, serif;
  }

  /* UNIFIED HEADING STYLES - POPPINS */
  .heading-primary {
    @apply font-unified font-bold text-gray-900 leading-tight;
  }
  
  .heading-secondary {
    @apply font-unified font-semibold text-gray-800 leading-relaxed;
  }
  
  .text-body {
    @apply font-unified text-gray-600 leading-relaxed;
  }
  
  .text-arabic {
    @apply font-arabic text-gray-700 leading-relaxed;
  }

  /* Button styles with RTL support - POPPINS */
  .btn-primary {
    @apply bg-green-500 hover:bg-green-600 text-white font-unified font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }

  .btn-secondary {
    @apply bg-green-100 hover:bg-green-200 text-green-700 font-unified font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }

  .card {
    @apply bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden;
  }

  .card-hover {
    @apply card hover:shadow-xl hover:scale-105 transition-all duration-300 cursor-pointer;
  }

  /* Fun animations for student engagement */
  .animate-bounce-gentle {
    animation: bounce-gentle 2s infinite;
  }

  .animate-float {
    animation: float 3s ease-in-out infinite;
  }

  /* Gradient backgrounds */
  .bg-gradient-green {
    background: linear-gradient(135deg, #10b981, #059669);
  }

  .bg-gradient-green-light {
    background: linear-gradient(135deg, #d1fae5, #a7f3d0);
  }

  .primary-bg-gradient {
    background-image: linear-gradient(
      90deg,
      #010d06 0%,
      #13793d 50%,
      #1bac56 100%
    );
  }
  
  /* Enhanced RTL-specific overrides - Only for specific cases */
  .rtl .ml-auto {
    margin-left: 0;
    margin-right: auto;
  }

  .rtl .mr-auto {
    margin-right: 0;
    margin-left: auto;
  }

  /* Only override text alignment for navigation and specific components */
  .rtl .nav-text-left {
    text-align: right;
  }

  .rtl .nav-text-right {
    text-align: left;
  }

  /* Force direction for specific elements */
  .rtl .flex-row {
    flex-direction: row-reverse;
  }

  .rtl .space-x-reverse > * + * {
    margin-right: var(--tw-space-x-reverse);
    margin-left: calc(var(--tw-space-x-reverse) * -1);
  }

  /* Language switcher positioning */
  .lang-switcher {
    @apply flex items-center space-x-2 rtl:space-x-reverse;
  }

  /* Form inputs with RTL support */
  .form-input {
    @apply w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors;
  }

  [dir="rtl"] .form-input {
    text-align: right;
  }

  [dir="ltr"] .form-input {
    text-align: left;
  }

  /* Enhanced dropdown positioning for RTL */
  [dir="rtl"] .dropdown-menu {
    right: auto;
    left: 0;
  }

  [dir="ltr"] .dropdown-menu {
    left: auto;
    right: 0;
  }

  /* Navigation improvements - Only for specific navigation elements */
  [dir="rtl"] .nav-item {
    text-align: right;
  }

  [dir="ltr"] .nav-item {
    text-align: left;
  }

  /* Icon positioning for RTL */
  [dir="rtl"] .icon-start {
    margin-right: 0;
    margin-left: 0.5rem;
  }

  [dir="rtl"] .icon-end {
    margin-left: 0;
    margin-right: 0.5rem;
  }

  /* Ensure proper transition during direction changes */
  .direction-transition {
    transition: all 0.3s ease-in-out;
  }

  /* Fix for flex layouts in RTL */
  [dir="rtl"] .justify-start {
    justify-content: flex-end;
  }

  [dir="rtl"] .justify-end {
    justify-content: flex-start;
  }

  [dir="rtl"] .items-start {
    align-items: flex-end;
  }

  [dir="rtl"] .items-end {
    align-items: flex-start;
  }

  /* Preserve center alignment in all directions */
  .text-center {
    text-align: center !important;
  }

  .justify-center {
    justify-content: center !important;
  }

  .items-center {
    align-items: center !important;
  }

  .mx-auto {
    margin-left: auto !important;
    margin-right: auto !important;
  }
}

@keyframes bounce-gentle {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-5px);
  }
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

/* Arabic text styling - Using Cairo */
[lang="ar"] {
  font-feature-settings: "liga" 1, "kern" 1;
  line-height: 1.6 !important;
}

/* Better Arabic typography - Using Cairo */
.arabic-text, [lang="ar"] {
  font-feature-settings: "liga" 1, "kern" 1, "calt" 1;
  letter-spacing: normal;
  word-spacing: normal;
  font-family: var(--font-cairo), "Times New Roman", Georgia, serif !important;
  direction: rtl;
  text-align: right;
}

/* Optimized French and English typography - Using Poppins */
.font-poppins, [lang="fr"], [lang="en"] {
  font-family: var(--font-poppins), -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;
  letter-spacing: -0.01em; /* Réduire l'espacement des lettres */
  word-spacing: normal;
  font-feature-settings: "liga" 1, "kern" 1, "calt" 1;
}

/* Optimized spacing for headings in French/English */
.font-poppins h1, .font-poppins h2, .font-poppins h3, 
.font-poppins h4, .font-poppins h5, .font-poppins h6,
[lang="fr"] h1, [lang="fr"] h2, [lang="fr"] h3,
[lang="fr"] h4, [lang="fr"] h5, [lang="fr"] h6,
[lang="en"] h1, [lang="en"] h2, [lang="en"] h3,
[lang="en"] h4, [lang="en"] h5, [lang="en"] h6 {
  letter-spacing: -0.02em; /* Espacement encore plus serré pour les titres */
  line-height: 1.2;
}

/* Optimized spacing for paragraphs in French/English */
.font-poppins p, [lang="fr"] p, [lang="en"] p {
  letter-spacing: -0.005em; /* Espacement légèrement réduit pour les paragraphes */
  line-height: 1.6;
}

/* Prevent scrolling when mobile menu is open */
body.mobile-menu-open {
  overflow: hidden;
}
.text-5xl{
  line-height:1.6 !important;
}
/* Enhanced RTL/LTR switching animations */
.direction-change-animation {
  transition: transform 0.3s ease-in-out, text-align 0.2s ease-in-out;
}

/* Force immediate direction updates */
[data-direction="rtl"] {
  direction: rtl !important;
}

[data-direction="ltr"] {
  direction: ltr !important;
}

/* Fix for common layout issues during direction changes */
.layout-container {
  transition: all 0.2s ease-in-out;
}

/* Removed the overly aggressive text alignment rules that were breaking center alignment */
/* Only apply specific text alignment to elements that need RTL/LTR handling */

/* Specific RTL text alignment for paragraphs and headings - but preserve explicit classes */
[dir="rtl"] p:not(.text-center):not(.text-left):not(.text-right),
[dir="rtl"] h1:not(.text-center):not(.text-left):not(.text-right),
[dir="rtl"] h2:not(.text-center):not(.text-left):not(.text-right),
[dir="rtl"] h3:not(.text-center):not(.text-left):not(.text-right),
[dir="rtl"] h4:not(.text-center):not(.text-left):not(.text-right),
[dir="rtl"] h5:not(.text-center):not(.text-left):not(.text-right),
[dir="rtl"] h6:not(.text-center):not(.text-left):not(.text-right) {
  text-align: right;
}

[dir="ltr"] p:not(.text-center):not(.text-left):not(.text-right),
[dir="ltr"] h1:not(.text-center):not(.text-left):not(.text-right),
[dir="ltr"] h2:not(.text-center):not(.text-left):not(.text-right),
[dir="ltr"] h3:not(.text-center):not(.text-left):not(.text-right),
[dir="ltr"] h4:not(.text-center):not(.text-left):not(.text-right),
[dir="ltr"] h5:not(.text-center):not(.text-left):not(.text-right),
[dir="ltr"] h6:not(.text-center):not(.text-left):not(.text-right) {
  text-align: left;
}

/* Enhanced smooth scrolling with custom easing */
html {
  scroll-behavior: auto; /* Disable default smooth scroll to use our custom implementation */
  scroll-padding-top: 80px; /* Offset for fixed header */
}

/* Custom smooth scroll for better control */
.smooth-scroll {
  scroll-behavior: auto;
  transition: scroll-behavior 0.3s ease-in-out;
}

/* Override default smooth scroll with custom easing */
* {
  scroll-behavior: auto; /* Use our custom smooth scroll instead */
}

/* Prevent jarring scroll jumps */
html, body {
  scroll-behavior: auto;
  overflow-x: hidden; /* Prevent horizontal scroll */
}

/* Custom scrollbar styling for better UX */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 4px;
  transition: background 0.3s ease;
}

::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

/* OPTIMISATIONS PERFORMANCE POUR CARTES SPÉCIALITÉS */
.will-change-transform {
  will-change: transform;
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
}

.contain-layout {
  contain: layout style paint;
}

/* Animations optimisées pour les cartes */
.card-hover-optimized {
  transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
}

.card-hover-optimized:hover {
  transform: translate3d(0, -4px, 0) scale(1.02);
}

/* Réduction des animations sur mobile */
@media (prefers-reduced-motion: reduce) {
  .will-change-transform,
  .card-hover-optimized {
    transition: none;
    animation: none;
  }
}

/* Optimisation GPU pour les modales */
.modal-optimized {
  will-change: transform, opacity;
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
}

/* Réduction des effets de flou sur les appareils moins puissants */
@media (max-width: 768px) {
  .backdrop-blur-xl {
    backdrop-filter: blur(8px);
  }
  
  .backdrop-blur-3xl {
    backdrop-filter: blur(12px);
  }
}

/* Classes pour limiter le nombre de lignes de texte */
.line-clamp-1 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
}

.line-clamp-2 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
}

.line-clamp-3 {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 3;
}

/* Classes spéciales pour les cartes de professeurs */
.professor-name {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  word-break: break-word;
  hyphens: auto;
}

.professor-subject {
  overflow: hidden;
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 1;
  word-break: break-word;
}

/* Responsive text sizing pour les cartes */
@media (max-width: 640px) {
  .professor-name {
    -webkit-line-clamp: 3;
  }
}

/* Hauteurs fixes pour les sections vertes uniformes */
.h-20 {
  height: 5rem; /* 80px */
}

.h-22 {
  height: 5.5rem; /* 88px */
}

.h-24 {
  height: 6rem; /* 96px */
}

.h-26 {
  height: 6.5rem; /* 104px */
}
